<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Fundamentals • SPR</title>
<!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script><!-- Bootstrap --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous">
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../bootstrap-toc.css">
<script src="../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script><meta property="og:title" content="Fundamentals">
<meta property="og:description" content="SPR">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body data-spy="scroll" data-target="#toc">
    <div class="container template-article">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">SPR</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">0.0.0.9000</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="../index.html">
    <span class="fas fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="../articles/01_Fundamentals.html">Fundamentals</a>
    </li>
    <li>
      <a href="../articles/06_Continuous.html">Continuous Data (Normal error distribution)</a>
    </li>
    <li>
      <a href="../articles/07_Binomial.html">Binomial Distribution</a>
    </li>
    <li>
      <a href="../articles/08_Ordinal-Probit.html">Ordinal Data (Probit)</a>
    </li>
    <li>
      <a href="../articles/09_Ordinal-Logistic.html">Ordinal Data (Logistic)</a>
    </li>
    <li>
      <a href="../articles/10_Multinomial.html">Multinomial Distribution</a>
    </li>
    <li>
      <a href="../articles/11_Poisson_Negative_Binomial.html">Poisson and Negative Binomial Distributions</a>
    </li>
    <li>
      <a href="../articles/12_GLMM.html">Longitudinal Binomial Data with the Generalized Linear Mixed Model: Simulation Study</a>
    </li>
    <li>
      <a href="../articles/13_CLMM_probit.html">Longitudinal Ordinal Data (Probit)</a>
    </li>
    <li>
      <a href="../articles/14_CLMM_logistic.html">Longitudinal Ordinal Data (Logistic, Marginal)</a>
    </li>
    <li>
      <a href="../articles/15_CLMM_conditional.html">Longitudinal Ordinal Data, Conditional Specification</a>
    </li>
    <li>
      <a href="../articles/CLMM_dropout.html">Modeling Longitudinal Data</a>
    </li>
    <li>
      <a href="../articles/Vignette_1.html">Vignette_1</a>
    </li>
    <li>
      <a href="../articles/Vignette_11.html">Vignette_11</a>
    </li>
    <li>
      <a href="../articles/Vignette_12.html">Vignette_12</a>
    </li>
    <li>
      <a href="../articles/Vignette_13.html">Vignette_13</a>
    </li>
    <li>
      <a href="../articles/Vignette_2.html">Vignette_2</a>
    </li>
    <li>
      <a href="../articles/Vignette_3.html">Vignette_3</a>
    </li>
    <li>
      <a href="../articles/Vignette_4.html">Vignette_4</a>
    </li>
    <li>
      <a href="../articles/Vignette_5.html">Vignette_5</a>
    </li>
  </ul>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right"></ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      

      </header><script src="01_Fundamentals_files/header-attrs-2.9/header-attrs.js"></script><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header toc-ignore">
      <h1 data-toc-skip>Fundamentals</h1>
            
      
      
      <div class="hidden name"><code>01_Fundamentals.Rmd</code></div>

    </div>

    
    
<div id="software-project-set-up" class="section level2">
<h2 class="hasAnchor">
<a href="#software-project-set-up" class="anchor"></a>Software Project Set up</h2>
<ul>
<li>Sponsor name, some descriptive for you to remember it, and project code:
<ul>
<li>Example: ABBV_CONSISTENCY_20222</li>
</ul>
</li>
<li>Within this folder:
<ol style="list-style-type: decimal">
<li>R project with project number</li>
<li>README file to note things to yourself with dates and topics, anything you need to jot down, do it here.
<ul>
<li>Keep a running record of everything</li>
</ul>
</li>
<li>Folders: DATA_20222, CODE_20222, TABLES_20222, FIGURES_20222, DOCUMENTS_2022; “DEPRECATED” subfolder to hold old, archived versions; “SANDBOX” subfolder to dump any code where you were messing around with something but it’s not for use - eg: “mmrm_testing_df_for_meeting_check”</li>
</ol>
</li>
<li>Create browser folder containing bookmarks related to a project</li>
</ul>
</div>
<div id="data-management" class="section level2">
<h2 class="hasAnchor">
<a href="#data-management" class="anchor"></a>Data Management</h2>
<div id="sdtmadam-file-formats" class="section level3">
<h3 class="hasAnchor">
<a href="#sdtmadam-file-formats" class="anchor"></a>SDTM/ADaM file formats</h3>
<ul>
<li><p>Learn the SDTM/ADaM file formats. This is not the place for it, but there are extensive resources online: <a href="https://www.fda.gov/media/143550/download" class="uri">https://www.fda.gov/media/143550/download</a></p></li>
<li><p>The key here is that clinical data is aggressively standardized - this is super important when trying to manage data; once you get familiar with the naming processes, you don’t need much in the way of a data dictionary or data specs to manage the data. This is good, because you’ll be lucky to get a “good luck” accompanying the data dump.</p></li>
</ul>
</div>
<div id="xpt-file-format" class="section level3">
<h3 class="hasAnchor">
<a href="#xpt-file-format" class="anchor"></a>.xpt file format:</h3>
<ul>
<li>Use the haven R package to read in file formats</li>
<li>.xpt preferred - safest choice</li>
<li>We can use the haven R package to read in a variety of data formats: <a href="https://haven.tidyverse.org/" class="uri">https://haven.tidyverse.org/</a>
<ul>
<li>However, I have had some issues reading in sas7bdat, rare but i hold my breath when reading in sas7bdat files.</li>
<li>Also, R cannot write out sas7bdat files (<a href="https://github.com/tidyverse/haven/issues/357#issuecomment-376313103" class="uri">https://github.com/tidyverse/haven/issues/357#issuecomment-376313103</a>)</li>
<li>If you need to provide a sas7bdat file, ask internal colleague to convert .csv or .dat file to a .sas7bdat file.</li>
<li>Long story short, the xpt file format is mandated by the FDA to be used, so they should have it. In my experience it requires more management but that’s okay, it will work.</li>
<li><a href="https://www.fda.gov/media/132457/download" class="uri">https://www.fda.gov/media/132457/download</a></li>
</ul>
</li>
</ul>
</div>
<div id="match-on-csr-tables" class="section level3">
<h3 class="hasAnchor">
<a href="#match-on-csr-tables" class="anchor"></a>Match on CSR Tables</h3>
<ul>
<li>First, match the endpoints reported in the CSR.
<ul>
<li>At the very least, match the primary endpoints.</li>
</ul>
</li>
<li>If this isn’t possible, match on sample size, or any available official outcomes.</li>
<li>The details of the data matching should be specified in the SAP</li>
</ul>
</div>
<div id="long-data-format" class="section level3">
<h3 class="hasAnchor">
<a href="#long-data-format" class="anchor"></a>Long Data format</h3>
<ul>
<li>This is the correct way to manage data for analysis. This is the assumption in all of our internal trainings, that you have long data.
<ul>
<li>If you DON’T have long data, it is recommended you use the pivot_long function from the tidyverse R packages to obtain long data.</li>
<li>Note that other R packages, like ggplot2, are most compatible with long data.</li>
<li>If you’re unsure what this should look like, use one of the functions to simulate data, use <code><a href="https://rdrr.io/r/utils/View.html">View(dat)</a></code> and <code><a href="https://rdrr.io/r/utils/str.html">str(dat)</a></code> it to get a feel for how your data should look.</li>
</ul>
</li>
</ul>
</div>
<div id="factor-variables" class="section level3">
<h3 class="hasAnchor">
<a href="#factor-variables" class="anchor"></a>Factor variables</h3>
<ul>
<li>All of your variables that are factors should be carefully ordered and labeled.</li>
<li>This is done using the <code><a href="https://rdrr.io/r/base/factor.html">factor()</a></code> function, specifically the “levels” and “labels” calls.
<ul>
<li>Do not do any analysis until you are confident in how you’re implementing this.</li>
</ul>
</li>
<li>“Should this variable be a character or a factor?”
<ul>
<li>Usually I make my variables as a factor or numeric. Only Subject IDs are left as character variables.</li>
<li>I do this because I am not interested in the subject IDs and there’s so many that a factor variable will get unwieldy.</li>
</ul>
</li>
</ul>
</div>
<div id="data-management-function---data_mgmt" class="section level3">
<h3 class="hasAnchor">
<a href="#data-management-function---data_mgmt" class="anchor"></a>Data Management Function - <code>data_mgmt()</code>
</h3>
<ul>
<li>Create a function for data management</li>
<li>Source that file, run that function to yield managed data</li>
<li>Do this each time you run analysis code, this will ensure all results are fully replicable
<ul>
<li>Any changes to data management should be done to that one single file</li>
</ul>
</li>
<li>This prevents cluttering your Global environment with additional objects</li>
</ul>
</div>
</div>
<div id="descriptive-statistics" class="section level2">
<h2 class="hasAnchor">
<a href="#descriptive-statistics" class="anchor"></a>Descriptive Statistics</h2>
<ul>
<li>Routine part of every analysis
<ul>
<li>Example: in psychometric analysis, you’re expected to compute item response distributions</li>
</ul>
</li>
<li>Descriptive statistics should computed and presented in tables and figures</li>
<li>
<code>gtsummary</code> R package
<ul>
<li>Use collection of tools to streamline this process</li>
<li><a href="http://www.danieldsjoberg.com/gtsummary/index.html" class="uri">http://www.danieldsjoberg.com/gtsummary/index.html</a></li>
</ul>
</li>
</ul>
</div>
<div id="coding-best-practices" class="section level2">
<h2 class="hasAnchor">
<a href="#coding-best-practices" class="anchor"></a>Coding Best Practices</h2>
<ul>
<li>Getting started: Outline your code on paper
<ul>
<li>Especially important for bigger projects with multiple functions</li>
<li>Pass what objects to what functions?</li>
</ul>
</li>
<li>Functions
<ul>
<li>Sandbox: Sometimes creating functions makes it hard to trouble shoot what you’re doing if you’re just experimenting - If this is going to be a problem, just write it all out hard coded, confirm it works</li>
<li>Make it a function: once you know it works, yes, you should make it a function.</li>
</ul>
</li>
<li>Writing Functions
<ul>
<li>Build functions sequentially
<ol style="list-style-type: decimal">
<li>First write the procedure, hard code all variables</li>
<li>Test it! Make sure it works!</li>
<li>One at a time, change the variables from hard-coded to things you can pass</li>
<li>Test it, make sure it still works</li>
<li>Proceed to change next variable</li>
<li>After it has ALL been generalized, then wrap it in a function</li>
<li>Pass all of the variables to the function
<ul>
<li>Make it throw an error if any of the variables are NOT passed to the function</li>
</ul>
</li>
</ol>
</li>
</ul>
</li>
</ul>
</div>
<div id="code-guidelines" class="section level2">
<h2 class="hasAnchor">
<a href="#code-guidelines" class="anchor"></a>Code Guidelines</h2>
<ul>
<li>
<p>Code guidelines: <a href="https://style.tidyverse.org/" class="uri">https://style.tidyverse.org/</a></p>
<ul>
<li>Most important - document heavily; another programmer should be able to step in, review your code, and figure out what you’re doing <strong>and why </strong> without too much difficulty.</li>
</ul>
</li>
</ul>
</div>
<div id="testing-code" class="section level2">
<h2 class="hasAnchor">
<a href="#testing-code" class="anchor"></a>Testing Code</h2>
<p>Code very slowly in order to code very quickly</p>
<ul>
<li>Write a line of code</li>
<li>Run line of code</li>
<li>Evaluate output</li>
<li>Check length/dimensions</li>
<li>View output – does it align with what you anticipated?</li>
<li>Test it – if you change something, does it break or output something undesired?</li>
<li>Missing value handling – what happens if there’s an NA or NAN in the input?
<ul>
<li>Any other way it could break? Make a note.</li>
</ul>
</li>
<li>Each time you test that line of code, re-run all the preceding code
<ul>
<li>Ensures you are not overwriting anything</li>
<li>Your output won’t depend on your previous test</li>
</ul>
</li>
<li>After you’re confident that you don’t have any errors in that line of code, proceed to next line of code</li>
<li>TO MAXIMIZE SPEED, MINIMIZE ERRORS!
<ul>
<li>Microsoft’s approach: <a href="https://www.joelonsoftware.com/2000/08/09/the-joel-test-12-steps-to-better-code/" class="uri">https://www.joelonsoftware.com/2000/08/09/the-joel-test-12-steps-to-better-code/</a>
</li>
</ul>
</li>
</ul>
</div>
<div id="statistics-resources-references" class="section level2">
<h2 class="hasAnchor">
<a href="#statistics-resources-references" class="anchor"></a>Statistics Resources &amp; References</h2>
<ul>
<li>We all need reminders for ourselves, and references to point clients to</li>
<li>Common statistical tests are linear models (or: how to do basic stats)
<ul>
<li><a href="https://lindeloev.github.io/tests-as-linear/" class="uri">https://lindeloev.github.io/tests-as-linear/</a></li>
</ul>
</li>
<li>Missing Data in clinical trials (and analysis in RCT more broadly)
<ul>
<li><a href="https://www.ncbi.nlm.nih.gov/books/NBK209904/" class="uri">https://www.ncbi.nlm.nih.gov/books/NBK209904/</a></li>
</ul>
</li>
<li>Code Guidelines
<ul>
<li><a href="https://style.tidyverse.org/" class="uri">https://style.tidyverse.org/</a></li>
</ul>
</li>
<li>Jargon
<ul>
<li>NRC stat report had a section on jargon: <a href="https://www.ncbi.nlm.nih.gov/books/NBK209903/" class="uri">https://www.ncbi.nlm.nih.gov/books/NBK209903/</a>
</li>
</ul>
</li>
<li>Bug report
<ul>
<li>How do we report issues/problems to developers/stackoverflow community/colleagues?</li>
<li><a href="https://github.com/rstudio/rstudio/wiki/Writing-Good-Bug-Reports" class="uri">https://github.com/rstudio/rstudio/wiki/Writing-Good-Bug-Reports</a></li>
<li>Summary: send fully reproducible code and output from “sessionInfo()”</li>
</ul>
</li>
</ul>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">

        <nav id="toc" data-toggle="toc"><h2 data-toc-skip>Contents</h2>
    </nav>
</div>

</div>



      <footer><div class="copyright">
  <p>Developed by Charlie Iaconangelo.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.6.1.</p>
</div>

      </footer>
</div>

  


  </body>
</html>
